{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./EditModal.css\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditModal=_ref=>{let{isOpen,onClose,link,onUpdate}=_ref;const[url,setUrl]=useState(\"\");const[remarks,setRemarks]=useState(\"\");const[isExpirationEnabled,setExpirationEnabled]=useState(false);const[expirationDate,setExpirationDate]=useState(\"\");useEffect(()=>{if(link){setUrl(link.destinationUrl);setRemarks(link.remarks);setExpirationEnabled(!!link.expiryDate);setExpirationDate(link.expiryDate||\"\");}},[link]);if(!isOpen)return null;const handleClear=()=>{setUrl(\"\");setRemarks(\"\");setExpirationEnabled(false);setExpirationDate(\"\");};const handleSubmit=async()=>{try{const token=localStorage.getItem('authToken');if(!token){alert(\"User is not authenticated\");return;}if(!url||!remarks){alert(\"URL and Remarks are required\");return;}const dataToSend={url,remarks,expirationDate:isExpirationEnabled?expirationDate:null};console.log('Sending data:',dataToSend);console.log('Link ID:',link._id);const response=await axios.put(\"https://shortly-backend-syh2.onrender.com/api/update-link/\".concat(link._id),dataToSend,{headers:{Authorization:\"Bearer \".concat(token)}});console.log('Link updated:',response.data.link);onClose();onUpdate(response.data.link);}catch(error){console.error('Error updating link:',error);if(error.response){alert(\"Error: \".concat(error.response.data.message));}else{alert('An unexpected error occurred. Please try again later.');}}};return/*#__PURE__*/_jsx(\"div\",{className:\"edit-modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"edit-modal-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"edit-modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Link\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-close-button\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-modal-body\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Destination Url \",/*#__PURE__*/_jsx(\"span\",{className:\"edit-required\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"https://web.whatsapp.com/\",value:url,onChange:e=>setUrl(e.target.value)}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Remarks \",/*#__PURE__*/_jsx(\"span\",{className:\"edit-required\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Add remarks\",value:remarks,onChange:e=>setRemarks(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-expiration-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Link Expiration\"}),/*#__PURE__*/_jsx(\"div\",{className:\"edit-expiration-toggle\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"edit-toggle-switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isExpirationEnabled,onChange:e=>setExpirationEnabled(e.target.checked)}),/*#__PURE__*/_jsx(\"span\",{className:\"edit-slider\"})]})})]}),isExpirationEnabled&&/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:expirationDate,onChange:e=>setExpirationDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit-clear-button\",onClick:handleClear,children:\"Clear\"}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-create-button\",onClick:handleSubmit,children:\"Save changes\"})]})]})});};export default EditModal;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","EditModal","_ref","isOpen","onClose","link","onUpdate","url","setUrl","remarks","setRemarks","isExpirationEnabled","setExpirationEnabled","expirationDate","setExpirationDate","destinationUrl","expiryDate","handleClear","handleSubmit","token","localStorage","getItem","alert","dataToSend","console","log","_id","response","put","concat","headers","Authorization","data","error","message","className","children","onClick","type","placeholder","value","onChange","e","target","checked"],"sources":["D:/Cuvette/deploy testing/MERN/Client/shortener/src/Components/Dashboard/Modals/EditModal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./EditModal.css\";\r\nimport axios from \"axios\";\r\n\r\nconst EditModal = ({ isOpen, onClose, link, onUpdate }) => {\r\n  const [url, setUrl] = useState(\"\");\r\n  const [remarks, setRemarks] = useState(\"\");\r\n  const [isExpirationEnabled, setExpirationEnabled] = useState(false);\r\n  const [expirationDate, setExpirationDate] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (link) {\r\n      setUrl(link.destinationUrl);\r\n      setRemarks(link.remarks);\r\n      setExpirationEnabled(!!link.expiryDate);\r\n      setExpirationDate(link.expiryDate || \"\");\r\n    }\r\n  }, [link]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleClear = () => {\r\n    setUrl(\"\");\r\n    setRemarks(\"\");\r\n    setExpirationEnabled(false);\r\n    setExpirationDate(\"\");\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        alert(\"User is not authenticated\");\r\n        return;\r\n      }\r\n  \r\n      if (!url || !remarks) {\r\n        alert(\"URL and Remarks are required\");\r\n        return;\r\n      }\r\n  \r\n      const dataToSend = {\r\n        url,\r\n        remarks,\r\n        expirationDate: isExpirationEnabled ? expirationDate : null,\r\n      };\r\n  \r\n      console.log('Sending data:', dataToSend); \r\n      console.log('Link ID:', link._id); \r\n  \r\n      const response = await axios.put(\r\n        `https://shortly-backend-syh2.onrender.com/api/update-link/${link._id}`,\r\n        dataToSend,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n  \r\n      console.log('Link updated:', response.data.link);\r\n  \r\n      onClose();\r\n  \r\n      onUpdate(response.data.link);\r\n    } catch (error) {\r\n      console.error('Error updating link:', error);\r\n  \r\n      if (error.response) {\r\n        alert(`Error: ${error.response.data.message}`);\r\n      } else {\r\n        alert('An unexpected error occurred. Please try again later.');\r\n      }\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"edit-modal-overlay\">\r\n      <div className=\"edit-modal-container\">\r\n        <div className=\"edit-modal-header\">\r\n          <h3>Edit Link</h3>\r\n          <button className=\"edit-close-button\" onClick={onClose}>\r\n            âœ•\r\n          </button>\r\n        </div>\r\n        <div className=\"edit-modal-body\">\r\n          <label>\r\n            Destination Url <span className=\"edit-required\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"https://web.whatsapp.com/\"\r\n            value={url}\r\n            onChange={(e) => setUrl(e.target.value)}\r\n          />\r\n\r\n          <label>\r\n            Remarks <span className=\"edit-required\">*</span>\r\n          </label>\r\n          <textarea\r\n            placeholder=\"Add remarks\"\r\n            value={remarks}\r\n            onChange={(e) => setRemarks(e.target.value)}\r\n          ></textarea>\r\n\r\n          <div className=\"edit-expiration-container\">\r\n            <label>Link Expiration</label>\r\n            <div className=\"edit-expiration-toggle\">\r\n              <label className=\"edit-toggle-switch\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={isExpirationEnabled}\r\n                  onChange={(e) => setExpirationEnabled(e.target.checked)}\r\n                />\r\n                <span className=\"edit-slider\"></span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          {isExpirationEnabled && (\r\n            <input\r\n              type=\"datetime-local\"\r\n              value={expirationDate}\r\n              onChange={(e) => setExpirationDate(e.target.value)}\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"edit-modal-footer\">\r\n          <button className=\"edit-clear-button\" onClick={handleClear}>\r\n            Clear\r\n          </button>\r\n          <button className=\"edit-create-button\" onClick={handleSubmit}>\r\n            Save changes\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}