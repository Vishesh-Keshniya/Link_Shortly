{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./Analysis.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Analysis(){const[links,setLinks]=useState([]);const[sortOrder,setSortOrder]=useState('asc');const truncateUrl=url=>{if(url.length>20){return url.substring(0,20)+\"...\";}return url;};useEffect(()=>{const fetchLinks=async()=>{try{const response=await axios.get('https://shortly-backend-syh2.onrender.com/analysis/get-links',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('authToken'))}});setLinks(response.data.links);}catch(error){console.error('Error fetching links data:',error);}};fetchLinks();},[]);const sortByDate=()=>{const sortedLinks=[...links].sort((a,b)=>{const dateA=new Date(a.createdAt);const dateB=new Date(b.createdAt);return sortOrder==='asc'?dateA-dateB:dateB-dateA;});setLinks(sortedLinks);setSortOrder(sortOrder==='asc'?'desc':'asc');};return/*#__PURE__*/_jsx(\"div\",{className:\"analysis-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-table-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"analysis-table-header\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"analysis-table\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Timestamp\",/*#__PURE__*/_jsx(\"button\",{className:\"date-sort\",onClick:sortByDate,children:/*#__PURE__*/_jsx(\"img\",{src:\"sort.png\",alt:\"Sort\"})})]}),/*#__PURE__*/_jsx(\"li\",{children:\"Original Link\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Short Link\"}),/*#__PURE__*/_jsx(\"li\",{children:\"IP Address\"}),/*#__PURE__*/_jsx(\"li\",{children:\"User Device\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"analysis-table-body\",children:links.map((link,index)=>/*#__PURE__*/_jsxs(\"ul\",{className:\"analysis-row\",children:[/*#__PURE__*/_jsx(\"li\",{children:new Date(link.createdAt).toLocaleString()}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"linky\",href:link.destinationUrl,target:\"_blank\",rel:\"noopener noreferrer\",children:truncateUrl(link.destinationUrl)})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"linky\",href:link.shortUrl,target:\"_blank\",rel:\"noopener noreferrer\",children:truncateUrl(link.shortUrl)})}),/*#__PURE__*/_jsx(\"li\",{children:link.ipAddress}),/*#__PURE__*/_jsx(\"li\",{className:\"analysis-device\",children:link.device})]},index))})]})});}export default Analysis;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Analysis","links","setLinks","sortOrder","setSortOrder","truncateUrl","url","length","substring","fetchLinks","response","get","headers","Authorization","concat","localStorage","getItem","data","error","console","sortByDate","sortedLinks","sort","a","b","dateA","Date","createdAt","dateB","className","children","onClick","src","alt","map","link","index","toLocaleString","href","destinationUrl","target","rel","shortUrl","ipAddress","device"],"sources":["D:/Cuvette/deploy testing/MERN/Client/shortener/src/Components/Dashboard/Modals/Analysis.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './Analysis.css';\r\nimport axios from 'axios';\r\n\r\nfunction Analysis() {\r\n  const [links, setLinks] = useState([]);\r\n  const [sortOrder, setSortOrder] = useState('asc');\r\n\r\n  const truncateUrl = (url) => {\r\n    if (url.length > 20) {\r\n      return url.substring(0, 20) + \"...\";\r\n    }\r\n    return url;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchLinks = async () => {\r\n      try {\r\n        const response = await axios.get('https://shortly-backend-syh2.onrender.com/analysis/get-links', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('authToken')}`,\r\n          },\r\n        });\r\n\r\n        setLinks(response.data.links);\r\n      } catch (error) {\r\n        console.error('Error fetching links data:', error);\r\n      }\r\n    };\r\n\r\n    fetchLinks();\r\n  }, []);\r\n\r\n  const sortByDate = () => {\r\n    const sortedLinks = [...links].sort((a, b) => {\r\n      const dateA = new Date(a.createdAt);\r\n      const dateB = new Date(b.createdAt);\r\n      return sortOrder === 'asc' ? dateA - dateB : dateB - dateA;\r\n    });\r\n    setLinks(sortedLinks);\r\n    setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');\r\n  };\r\n\r\n  return (\r\n    <div className=\"analysis-container\">\r\n      <div className=\"analysis-table-wrapper\">\r\n        <div className=\"analysis-table-header\">\r\n          <ul className=\"analysis-table\">\r\n            <li>\r\n              Timestamp\r\n              <button className=\"date-sort\" onClick={sortByDate}>\r\n                <img src=\"sort.png\" alt=\"Sort\" />\r\n              </button>\r\n            </li>\r\n            <li>Original Link</li>\r\n            <li>Short Link</li>\r\n            <li>IP Address</li>\r\n            <li>User Device</li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div className=\"analysis-table-body\">\r\n          {links.map((link, index) => (\r\n            <ul className=\"analysis-row\" key={index}>\r\n              <li>{new Date(link.createdAt).toLocaleString()}</li>\r\n              <li>\r\n                <a className='linky' href={link.destinationUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  {truncateUrl(link.destinationUrl)}\r\n                </a>\r\n              </li>\r\n              <li>\r\n                <a className='linky' href={link.shortUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                 {truncateUrl(link.shortUrl)}\r\n                </a>\r\n              </li>\r\n              <li>{link.ipAddress}</li>\r\n              <li className=\"analysis-device\">{link.device}</li>\r\n            </ul>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Analysis;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}