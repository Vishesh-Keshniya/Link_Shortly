{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"./Dashpart.css\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Dashpart(){const[totalClicks,setTotalClicks]=useState(0);const[deviceClicks,setDeviceClicks]=useState({desktop:0,mobile:0,tablet:0});const[dateWiseClicks,setDateWiseClicks]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchClickStats=async()=>{const token=localStorage.getItem(\"authToken\");if(!token){setError(\"User is not authenticated.\");return;}try{const response=await axios.get(\"https://shortly-backend-syh2.onrender.com/api/dash-clicks\",{headers:{Authorization:\"Bearer \".concat(token)}});const{totalClicks,deviceClicks,dateWiseClicks}=response.data;setTotalClicks(totalClicks||0);setDeviceClicks(deviceClicks||{desktop:0,mobile:0,tablet:0});const groupedClicks=dateWiseClicks.reduce((acc,entry)=>{const date=new Date(entry.date).toLocaleDateString();if(!acc[date]){acc[date]=0;}acc[date]+=entry.clickCount;return acc;},{});const groupedClicksArray=Object.entries(groupedClicks).map(_ref=>{let[date,clickCount]=_ref;return{date,clickCount};});setDateWiseClicks(groupedClicksArray||[]);}catch(error){console.error(\"Error fetching click stats:\",error);setError(\"Failed to fetch click statistics. Please try again.\");}finally{setIsLoading(false);}};fetchClickStats();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashpart-container\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h2\",{children:[\"Total Clicks \",/*#__PURE__*/_jsxs(\"span\",{className:\"total\",children:[\" \",totalClicks]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashpart-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Date-wise Clicks\"}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"date-clicks-list\",children:dateWiseClicks.length>0?dateWiseClicks.map((entry,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"date-clicks-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:entry.date}),/*#__PURE__*/_jsx(\"div\",{className:\"click-bar\",style:{width:\"\".concat(entry.clickCount/totalClicks*10,\"%\")}}),/*#__PURE__*/_jsx(\"span\",{className:\"bar-label\",children:entry.clickCount})]},index)):/*#__PURE__*/_jsx(\"p\",{children:\"No data available.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Click Devices\"}),isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"device-clicks-list\",children:Object.entries(deviceClicks).map(_ref2=>{let[device,clicks]=_ref2;if(clicks>0){return/*#__PURE__*/_jsxs(\"div\",{className:\"device-clicks-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:device.charAt(0).toUpperCase()+device.slice(1)}),/*#__PURE__*/_jsx(\"div\",{className:\"click-bar-device\",style:{width:\"\".concat(clicks/totalClicks*10,\"%\")}}),/*#__PURE__*/_jsx(\"span\",{className:\"bar-label\",children:clicks})]},device);}return null;})})]})]})]});}export default Dashpart;","map":{"version":3,"names":["React","useState","useEffect","axios","jsxs","_jsxs","jsx","_jsx","Dashpart","totalClicks","setTotalClicks","deviceClicks","setDeviceClicks","desktop","mobile","tablet","dateWiseClicks","setDateWiseClicks","isLoading","setIsLoading","error","setError","fetchClickStats","token","localStorage","getItem","response","get","headers","Authorization","concat","data","groupedClicks","reduce","acc","entry","date","Date","toLocaleDateString","clickCount","groupedClicksArray","Object","entries","map","_ref","console","className","children","length","index","style","width","_ref2","device","clicks","charAt","toUpperCase","slice"],"sources":["D:/Cuvette/deploy testing/MERN/Client/shortener/src/Components/Dashboard/Modals/Dashpart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Dashpart.css\";\r\n\r\nfunction Dashpart() {\r\n  const [totalClicks, setTotalClicks] = useState(0);\r\n  const [deviceClicks, setDeviceClicks] = useState({\r\n    desktop: 0,\r\n    mobile: 0,\r\n    tablet: 0,\r\n  });\r\n  const [dateWiseClicks, setDateWiseClicks] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchClickStats = async () => {\r\n      const token = localStorage.getItem(\"authToken\");\r\n      if (!token) {\r\n        setError(\"User is not authenticated.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(\"https://shortly-backend-syh2.onrender.com/api/dash-clicks\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        const { totalClicks, deviceClicks, dateWiseClicks } = response.data;\r\n\r\n        setTotalClicks(totalClicks || 0);\r\n        setDeviceClicks(deviceClicks || { desktop: 0, mobile: 0, tablet: 0 });\r\n\r\n        const groupedClicks = dateWiseClicks.reduce((acc, entry) => {\r\n          const date = new Date(entry.date).toLocaleDateString();\r\n          if (!acc[date]) {\r\n            acc[date] = 0;\r\n          }\r\n          acc[date] += entry.clickCount;\r\n          return acc;\r\n        }, {});\r\n\r\n        const groupedClicksArray = Object.entries(groupedClicks).map(([date, clickCount]) => ({\r\n          date,\r\n          clickCount,\r\n        }));\r\n\r\n        setDateWiseClicks(groupedClicksArray || []);\r\n      } catch (error) {\r\n        console.error(\"Error fetching click stats:\", error);\r\n        setError(\"Failed to fetch click statistics. Please try again.\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchClickStats();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"dashpart-container\">\r\n     \r\n      <div>\r\n        <h2>Total Clicks <span className=\"total\"> {totalClicks}</span></h2>\r\n      </div>\r\n\r\n      <div className=\"dashpart-stats\">\r\n      \r\n        <div className=\"stats-card\">\r\n          <h3>Date-wise Clicks</h3>\r\n          {isLoading ? (\r\n            <p>Loading...</p>\r\n          ) : (\r\n            <div className=\"date-clicks-list\">\r\n              {dateWiseClicks.length > 0 ? (\r\n                dateWiseClicks.map((entry, index) => (\r\n                  <div key={index} className=\"date-clicks-item\">\r\n                    <span>{entry.date}</span>\r\n                    <div\r\n                      className=\"click-bar\"\r\n                      style={{\r\n                        width: `${(entry.clickCount / totalClicks) * 10}%`,\r\n                      }}\r\n                    />\r\n                    <span className=\"bar-label\">{entry.clickCount}</span>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p>No data available.</p>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"stats-card\">\r\n          <h3>Click Devices</h3>\r\n          {isLoading ? (\r\n            <p>Loading...</p>\r\n          ) : (\r\n            <div className=\"device-clicks-list\">\r\n              {Object.entries(deviceClicks).map(([device, clicks]) => {\r\n                if (clicks > 0) {\r\n                  return (\r\n                    <div key={device} className=\"device-clicks-item\">\r\n                      <span>{device.charAt(0).toUpperCase() + device.slice(1)}</span>\r\n                      <div\r\n                        className=\"click-bar-device\"\r\n                        style={{\r\n                          width: `${(clicks / totalClicks) * 10}%`,\r\n                        }}\r\n                      />\r\n                      <span className=\"bar-label\">{clicks}</span>\r\n                    </div>\r\n                  );\r\n                }\r\n                return null;\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashpart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}